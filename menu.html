<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Menu Order System</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #121212;
            color: #eee;
            padding: 20px;
            max-width: 900px;
            margin: auto;
        }

        h2 {
            text-align: center;
            color: #00cc99;
            margin-bottom: 20px;
        }

        form {
            background: #1f1f1f;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 0 8px #00cc99;
            max-height: 85vh;
            overflow-y: auto;
        }

        .category {
            margin-top: 20px;
        }

            .category h3 {
                border-bottom: 1px solid #444;
                padding-bottom: 5px;
                margin-bottom: 10px;
                color: #ffcc00;
            }

        .menu-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

            .menu-item label {
                flex: 1;
                padding-right: 10px;
            }

            .menu-item input[type="number"] {
                width: 60px;
                background: #2b2b2b;
                border: none;
                color: #eee;
                border-radius: 4px;
                padding: 5px;
                text-align: center;
            }

        .delivery-options {
            margin: 20px 0 10px;
        }

            .delivery-options label {
                margin-right: 20px;
                cursor: pointer;
            }

        select {
            width: 100%;
            padding: 8px;
            border-radius: 5px;
            border: none;
            background: #2b2b2b;
            color: #eee;
            margin-top: 6px;
            margin-bottom: 15px;
        }

        .hidden {
            display: none;
        }

        .cart {
            background: #272727;
            margin-top: 20px;
            padding: 15px;
            border-radius: 6px;
        }

            .cart h3 {
                margin-top: 0;
            }

        .cart-total {
            font-weight: bold;
            font-size: 1.1em;
            text-align: right;
        }

        button {
            margin-top: 20px;
            background: #00cc99;
            border: none;
            color: #111;
            padding: 12px 20px;
            font-weight: bold;
            width: 100%;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

            button:hover {
                background: #009966;
                color: white;
            }
    </style>
</head>
<body>

    <h2>Menu Order System</h2>

    <form id="orderForm">
        <div id="menuList"></div>

        <label>Delivery To:</label>
        <div class="delivery-options">
            <label><input type="radio" name="delivery" value="table" required /> Table</label>
            <label><input type="radio" name="delivery" value="room" /> Room</label>
            <label><input type="radio" name="delivery" value="takeaway" /> Takeaway</label>
        </div>

        <div id="tableSelect" class="hidden">
            <label>Select Table (1–30):</label>
            <select id="tableNumber">
                <option value="">Select Table</option>
            </select>
        </div>

        <div id="roomSelect" class="hidden">
            <label>Select Room (1–10):</label>
            <select id="roomNumber">
                <option value="">Select Room</option>
            </select>
        </div>

        <div class="cart">
            <h3>Order Summary</h3>
            <div id="cartItems" class="cart-items">No items selected.</div>
            <div class="cart-total" id="cartTotal">Total: 0 EGP</div>
        </div>

        <button type="submit">Add Order</button>
    </form>

    <script>
        const menuData = {
            "Hot Drinks": [
                { name: "Tea", price: 15 },
                { name: "Milk Tea", price: 30 },
                { name: "Classic Cappuccino", price: 40 },
                { name: "Hot Cider", price: 40 },
                { name: "Hot Chocolate", price: 40 },
                { name: "Hot Oreo", price: 55 },
                { name: "Herbal Tea", price: 20 },
                { name: "Classic Sahlab", price: 40 },
                { name: "Fruit Sahlab", price: 50 },
                { name: "Nuts Sahlab", price: 55 }
                ],

            "Desserts": [
                 { name: "Cheesecake", price: 55, category: "Desserts" },
                 { name: "Molten Cake", price: 70, category: "Desserts" },
                   { name: "Tiramisu", price: 60, category: "Desserts" },
                   { name: "Red Velvet", price: 60, category: "Desserts" },
            ],
            "Soft Drinks": [
                { name: "Water", price: 10, category: "Soft Drinks" },
                { name: "Can", price: 30, category: "Soft Drinks" },
                { name: "Red Bull", price: 60, category: "Soft Drinks" }
            ],
            "Coffee Corner": [
                { name: "Turkish Coffee", price: 25 },
                { name: "French Coffee", price: 40 },
                { name: "Hazelnut Coffee", price: 40 },
                { name: "Espresso", price: 25 },
                { name: "Macchiato", price: 40 },
                { name: "Flat White", price: 40 },
                { name: "Americano Coffee", price: 40 },
                { name: "Mocha", price: 40 },
                { name: "Latte", price: 40 },
                { name: "Cappuccino", price: 55 },
                { name: "Spanish Latte", price: 40 }
            ],
            "Milkshake": [
                { name: "Vanilla", price: 60 },
                { name: "Caramel", price: 60 },
                { name: "Chocolate", price: 60 },
                { name: "Nutella", price: 75 },
                { name: "Oreo", price: 60 },
                { name: "Lotus", price: 65 },
                { name: "Mango", price: 60 },
                { name: "Strawberry", price: 60 },
                { name: "Blueberry", price: 60 },
                { name: "Mango Peach", price: 60 },
                { name: "Mango Kiwi", price: 60 },
                { name: "Mango Pineapple", price: 60 },
                { name: "Cheesecake", price: 75 },
                { name: "Maltesers", price: 75 }
            ],
            "Iced Coffee": [
                { name: "Iced Latte", price: 60 },
                { name: "Iced Spanish Latte", price: 70 },
                { name: "Iced Mocha", price: 70 },
                { name: "Iced Chocolate", price: 60 },
                { name: "Iced Coffee", price: 60 }
            ],
            "Frappuccino": [
                { name: "Classic Frappuccino", price: 60 },
                { name: "Toffee Frappuccino", price: 70 }
            ],
            "Smoothie": [
                { name: "Mango", price: 50 },
                { name: "Pineapple", price: 50 },
                { name: "Peach", price: 50 },
                { name: "Strawberry", price: 50 },
                { name: "Blueberry", price: 50 },
                { name: "Red Berry", price: 50 },
                { name: "Kiwi", price: 50 },
                { name: "Red Bull", price: 55 },
                { name: "Red Bull Land", price: 55 }
            ],
            "Mixed Soda": [
                { name: "Sun Shine", price: 50 },
                { name: "Sun Rise", price: 50 },
                { name: "Blue Passion", price: 50 },
                { name: "Tropical Dream", price: 50 },
                { name: "Cherry Cola", price: 50 },
                { name: "Berry Cola", price: 50 },
                { name: "Berry Soda", price: 50 },
                { name: "Red Bull Mix", price: 65 },
                { name: "Mojito", price: 50 },
                { name: "Mojito Flavor", price: 55 }
            ],
            "Fresh Juices": [
                { name: "Mango", price: 50 },
                { name: "Guava", price: 45 },
                { name: "Strawberry", price: 45 },
                { name: "Orange", price: 45 },
                { name: "Kiwi", price: 50 },
                { name: "Banana Milk", price: 50 },
                { name: "Lemon", price: 35 },
                { name: "Lemon Mint", price: 45 },
                { name: "Pomegranate", price: 50 },
                { name: "Watermelon", price: 50 },
                { name: "Cocktail", price: 60 }
            ]
        };

        const menuList = document.getElementById('menuList');
        Object.keys(menuData).forEach(category => {
            const catDiv = document.createElement('div');
            catDiv.className = 'category';
            catDiv.innerHTML = `<h3>${category}</h3>`;
            menuData[category].forEach((item, i) => {
                const div = document.createElement('div');
                div.className = 'menu-item';
                div.innerHTML = `
                    <label>${item.name} (${item.price} EGP)</label>
                    <input type="number" min="0" value="0" data-price="${item.price}" />
                `;
                catDiv.appendChild(div);
            });
            menuList.appendChild(catDiv);
        });

        const cartItemsDiv = document.getElementById('cartItems');
        const cartTotalDiv = document.getElementById('cartTotal');
        const tableSelect = document.getElementById('tableNumber');
        const roomSelect = document.getElementById('roomNumber');
        const deliveryRadios = document.querySelectorAll('input[name="delivery"]');
        const tableDiv = document.getElementById('tableSelect');
        const roomDiv = document.getElementById('roomSelect');
        const form = document.getElementById('orderForm');

        for (let i = 1; i <= 30; i++) {
            tableSelect.innerHTML += `<option value="${i}">Table ${i}</option>`;
        }
        for (let i = 1; i <= 10; i++) {
            roomSelect.innerHTML += `<option value="${i}">Room ${i}</option>`;
        }

        deliveryRadios.forEach(radio => {
            radio.addEventListener('change', () => {
                if (radio.value === 'table') {
                    tableDiv.classList.remove('hidden');
                    roomDiv.classList.add('hidden');
                } else if (radio.value === 'room') {
                    roomDiv.classList.remove('hidden');
                    tableDiv.classList.add('hidden');
                } else {
                    tableDiv.classList.add('hidden');
                    roomDiv.classList.add('hidden');
                }
            });
        });

        menuList.addEventListener('input', updateCart);

        function updateCart() {
            const inputs = menuList.querySelectorAll('input[type="number"]');
            let total = 0;
            let selected = [];
            inputs.forEach(input => {
                const qty = parseInt(input.value) || 0;
                if (qty > 0) {
                    const price = parseInt(input.dataset.price);
                    const name = input.previousElementSibling.textContent.split(' (')[0];
                    selected.push(`${name} x${qty} (${price * qty} EGP)`);
                    total += price * qty;
                }
            });
            cartItemsDiv.innerHTML = selected.length ? selected.join('<br>') : 'No items selected.';
            cartTotalDiv.textContent = `Total: ${total} EGP`;
        }

        const orders = JSON.parse(localStorage.getItem('menu_orders') || '[]');
        let orderId = orders.length ? Math.max(...orders.map(o => o.id)) + 1 : 1;

        form.addEventListener('submit', e => {
            e.preventDefault();
            const inputs = menuList.querySelectorAll('input[type="number"]');
            let selectedItems = [];
            let totalPrice = 0;
            inputs.forEach(input => {
                const qty = parseInt(input.value) || 0;
                if (qty > 0) {
                    const price = parseInt(input.dataset.price);
                    const name = input.previousElementSibling.textContent.split(' (')[0];
                    selectedItems.push({ name, qty, pricePerUnit: price });
                    totalPrice += price * qty;
                }
            });
            if (!selectedItems.length) {
                alert('Please select at least one menu item.');
                return;
            }
            const deliveryType = document.querySelector('input[name="delivery"]:checked');
            if (!deliveryType) {
                alert('Please select delivery type.');
                return;
            }
            let delivery = '';
            if (deliveryType.value === 'table') {
                const tableNum = tableSelect.value;
                if (!tableNum) {
                    alert('Please select a table.');
                    return;
                }
                delivery = `Table ${tableNum}`;
            } else if (deliveryType.value === 'room') {
                const roomNum = roomSelect.value;
                if (!roomNum) {
                    alert('Please select a room.');
                    return;
                }
                delivery = `Room ${roomNum}`;
            } else {
                delivery = 'Takeaway';
            }
            const now = new Date();
            const formattedDate = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) + ' ' + now.toLocaleDateString();
            const order = {
                id: orderId++,
                items: selectedItems,
                totalPrice,
                date: formattedDate,
                delivery
            };
            orders.push(order);
            localStorage.setItem('menu_orders', JSON.stringify(orders));
            alert('Order added successfully.');
            form.reset();
            updateCart();
            tableDiv.classList.add('hidden');
            roomDiv.classList.add('hidden');
        });
    </script>

</body>
</html>
